/* Tera Talk デザインシステム */

/* カラーパレット - 日本の伝統色 */
:root {
  /* ベース背景 - 生成り色 (きなりいろ) */
  --color-base-bg: #FBFAF7;

  /* サブ背景 - 石庭鼠 (せきていねず) */
  --color-sub-bg: #EAE8E3;

  /* メインテキスト - 墨色 (すみいろ) - WCAG AA準拠 */
  --color-text-primary: #2D2A24;

  /* アクセント - 朽葉色 (くちばいろ) - WCAG AA準拠 */
  --color-accent: #B5845A;
  --color-accent-hover: #A6754A;

  /* 成功・肯定 - 苔色 (こけいろ) - WCAG AA準拠 */
  --color-success: #4A6B56;
  --color-success-light: #5C7C68;

  /* 警告・否定 - 茜色 (あかねいろ) - WCAG AA準拠 */
  --color-warning: #A03D3D;
  --color-warning-light: #B54D4D;

  /* その他の色 - WCAG AA準拠 */
  --color-border: #C4BEB5;
  --color-shadow: rgba(0, 0, 0, 0.08);

  /* グラデーション背景用の色 */
  --color-gradient-start: #FBFAF7;
  --color-gradient-end: #EAE8E3;
}

/* タイポグラフィ */
.font-serif {
  font-family: 'Noto Serif JP', serif;
}

.font-sans {
  font-family: 'Noto Sans JP', sans-serif;
}

/* 見出しスタイル */
.heading-primary {
  font-family: 'Noto Serif JP', serif;
  font-size: 2.5rem;
  font-weight: 600;
  color: var(--color-text-primary);
  line-height: 1.3;
  letter-spacing: 0.02em;
}

.heading-secondary {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.875rem;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.4;
  letter-spacing: 0.01em;
}

.heading-tertiary {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.5rem;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.4;
}

/* 本文スタイル */
.body-text {
  font-family: 'Noto Sans JP', sans-serif;
  font-size: 1rem;
  line-height: 1.6;
  color: var(--color-text-primary);
  letter-spacing: 0.01em;
}

.body-text-lg {
  font-family: 'Noto Sans JP', sans-serif;
  font-size: 1.125rem;
  line-height: 1.6;
  color: var(--color-text-primary);
  letter-spacing: 0.01em;
}

/* ボタンスタイル */
.btn-primary {
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 500;
  color: white;
  transition: all 0.3s ease;
  background-color: var(--color-accent);
  box-shadow: 0 2px 8px var(--color-shadow);
  border: none;
  cursor: pointer;
}

.btn-primary:hover {
  background-color: var(--color-accent-hover);
  box-shadow: 0 4px 12px var(--color-shadow);
  transform: translateY(-1px);
}

.btn-secondary {
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 500;
  transition: all 0.3s ease;
  border: 2px solid var(--color-text-primary);
  color: var(--color-text-primary);
  background-color: transparent;
  cursor: pointer;
}

.btn-secondary:hover {
  background-color: var(--color-text-primary);
  color: var(--color-base-bg);
}

/* セカンダリ（ソフト） - 濃色反転しないバリアント */
.btn-secondary-soft {
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 500;
  transition: all 0.2s ease;
  border: 2px solid var(--color-border);
  color: var(--color-text-primary);
  background-color: transparent;
  cursor: pointer;
}

.btn-secondary-soft:hover {
  border-color: var(--color-accent);
  background-color: var(--color-sub-bg);
  color: var(--color-text-primary);
}

/* カードスタイル */
.card {
  border-radius: 0.75rem;
  padding: 1.5rem;
  transition: all 0.3s ease;
  background-color: var(--color-sub-bg);
  border: 1px solid var(--color-border);
  box-shadow: 0 2px 12px var(--color-shadow);
  text-decoration: none;
  color: inherit;
}

.card:hover {
  box-shadow: 0 8px 24px var(--color-shadow);
  transform: translateY(-2px);
  text-decoration: none;
}

/* カード内の個別リンクも下線を表示しない */
.card a {
  text-decoration: none;
  color: inherit;
}

/* チャットUI */
.chat-message-ai {
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  background-color: var(--color-sub-bg);
  border: 1px solid var(--color-accent);
  box-shadow: 0 2px 8px var(--color-shadow);
}

.chat-message-user {
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  margin-left: auto;
  max-width: 24rem;
  background-color: var(--color-accent);
  color: white;
  box-shadow: 0 2px 8px var(--color-shadow);
}

/* フォーム要素 */
.form-input {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  border: 1px solid var(--color-border);
  transition: all 0.3s ease;
  background-color: var(--color-sub-bg);
  color: var(--color-text-primary);
  font-family: 'Noto Sans JP', sans-serif;
}

.form-input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px rgba(184, 134, 11, 0.1);
}

/* アニメーション */
.fade-in {
  animation: fadeIn 0.6s ease-out;
}

.slide-up {
  animation: slideUp 0.6s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* レスポンシブ調整 */
@media (max-width: 768px) {
  .heading-primary {
    font-size: 1.875rem;
    line-height: 1.2;
  }

  .heading-secondary {
    font-size: 1.25rem;
  }

  .heading-tertiary {
    font-size: 1.25rem;
  }

  .card {
    padding: 1rem;
  }

  .body-text-lg {
    font-size: 1rem;
  }

  .btn-primary {
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
  }

  .btn-secondary {
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
  }

  .form-input {
    padding: 0.625rem 0.875rem;
    font-size: 0.875rem;
  }

  .chat-message-user,
  .chat-message-ai {
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
  }
}

/* タッチフレンドリーなUI */
@media (hover: none) and (pointer: coarse) {

  .btn-primary:hover,
  .btn-secondary:hover {
    transform: none;
  }

  .card:hover {
    transform: none;
  }

  .group-hover\:transform:hover {
    transform: none;
  }

  .group-hover\:scale-105:hover {
    transform: none;
  }

  .group-hover\:translate-x-2:hover {
    transform: none;
  }
}

/* モバイルでのタップ領域の拡大 */
@media (max-width: 768px) {

  button,
  .btn-primary,
  .btn-secondary,
  a[role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  input,
  textarea,
  select {
    min-height: 44px;
  }
}


/* アクセシビリティの改善 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* スキップリンク */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--color-accent);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
}

.skip-link:focus {
  top: 6px;
}

/* 高コントラストモード対応 */
@media (prefers-contrast: high) {
  .card {
    border: 2px solid var(--color-text-primary);
  }

  .btn-primary,
  .btn-secondary {
    border: 2px solid var(--color-text-primary);
  }

  .form-input {
    border: 2px solid var(--color-text-primary);
  }
}

/* アニメーション無効化 */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .fade-in,
  .slide-up {
    animation: none;
  }

  .group-hover\:transform:hover,
  .group-hover\:scale-105:hover,
  .group-hover\:translate-x-2:hover {
    transform: none;
  }
}

/* ---------------------------------------------
   イントロローディング・オーバーレイ
   --------------------------------------------- */
.intro-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  /* より濃い背景: 半透明の塗りと強めのラジアルグラデーションを重ねる */
  background:
    radial-gradient(1200px 800px at 50% 20%, rgba(181, 132, 90, 0.22), rgba(234, 232, 227, 1) 60%, var(--color-base-bg) 100%),
    linear-gradient(rgba(234, 232, 227, 0.98), rgba(234, 232, 227, 0.98));
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  opacity: 1;
  transition: opacity 600ms ease, visibility 600ms ease;
}

.intro-overlay.hidden {
  opacity: 0;
  visibility: hidden;
}

/* 蓮・光輪・曼荼羅レイヤー */
.intro-bg {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.mandala {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 110vmin;
  height: 110vmin;
  transform: translate(-50%, -50%);
  opacity: 0.22;
  filter: blur(0.15px) saturate(1.15);
  mix-blend-mode: multiply;
  animation: mandalaRotate 18s linear infinite;
}

.mandala svg {
  width: 100%;
  height: 100%;
}

@keyframes mandalaRotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }

  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

.halo {
  position: absolute;
  top: calc(50% - 140px);
  left: 50%;
  width: 320px;
  height: 320px;
  transform: translateX(-50%);
  border-radius: 9999px;
  background: conic-gradient(from 0deg, rgba(181, 132, 90, 0.0), rgba(181, 132, 90, 0.35), rgba(74, 107, 86, 0.28), rgba(181, 132, 90, 0.0));
  filter: blur(10px);
  animation: haloPulse 2.8s ease-in-out infinite;
}

@keyframes haloPulse {

  0%,
  100% {
    opacity: 0.45;
    transform: translateX(-50%) scale(0.98);
  }

  50% {
    opacity: 0.75;
    transform: translateX(-50%) scale(1.03);
  }
}

.petal {
  position: absolute;
  top: -40px;
  width: 14px;
  height: 20px;
  background: radial-gradient(70% 70% at 50% 30%, rgba(255, 255, 255, 0.95), rgba(181, 132, 90, 0.55));
  border-radius: 40% 60% 60% 40% / 60% 60% 40% 40%;
  opacity: 0.9;
  filter: blur(0.3px);
  animation: petalFall 8s linear infinite;
}

.petal::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(80% 60% at 50% 60%, rgba(255, 255, 255, 0.65), rgba(181, 132, 90, 0));
}

@keyframes petalFall {
  0% {
    transform: translateY(-40px) translateX(0) rotate(0deg);
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  50% {
    transform: translateY(50vh) translateX(-30px) rotate(40deg);
  }

  100% {
    transform: translateY(100vh) translateX(20px) rotate(90deg);
    opacity: 0;
  }
}

/* 花びらの個体差 */
.petal.p1 {
  left: 10%;
  animation-duration: 7.5s;
  animation-delay: 0s;
}

.petal.p2 {
  left: 22%;
  animation-duration: 8.6s;
  animation-delay: 0.8s;
  transform: scale(0.9);
}

.petal.p3 {
  left: 35%;
  animation-duration: 9.2s;
  animation-delay: 0.3s;
  transform: scale(1.1);
}

.petal.p4 {
  left: 48%;
  animation-duration: 7.8s;
  animation-delay: 1.2s;
}

.petal.p5 {
  left: 62%;
  animation-duration: 8.8s;
  animation-delay: 0.5s;
  transform: scale(0.95);
}

.petal.p6 {
  left: 74%;
  animation-duration: 9.8s;
  animation-delay: 1.6s;
}

.petal.p7 {
  left: 86%;
  animation-duration: 8.1s;
  animation-delay: 0.2s;
  transform: scale(1.05);
}

/* 水面の波紋 */
.ripples {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.ripple {
  position: absolute;
  width: 14px;
  height: 14px;
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.12);
  animation: rippleExpand 6.8s ease-out infinite;
}

.ripple svg {
  width: 100%;
  height: 100%;
  display: block;
  overflow: visible;
  filter: none;
}

.ripple-ring {
  fill: none;
  stroke: rgba(74, 107, 86, 0.38);
  stroke-width: 1.25px;
  vector-effect: scaling-stroke;
}

.ripple.r1 {
  left: 22%;
  top: 66%;
  animation-delay: 0s;
}

.ripple.r2 {
  left: 58%;
  top: 38%;
  animation-delay: 1.1s;
}

.ripple.r3 {
  left: 76%;
  top: 72%;
  animation-delay: 2.2s;
}

.ripple.r4 {
  left: 36%;
  top: 24%;
  animation-delay: 3.3s;
}

.ripple.r5 {
  left: 48%;
  top: 50%;
  animation-delay: 0.6s;
}

.ripple.r6 {
  left: 80%;
  top: 20%;
  animation-delay: 1.8s;
}

.ripple.r1b {
  left: 22%;
  top: 66%;
  animation-delay: 0.8s;
}

.ripple.r2b {
  left: 58%;
  top: 38%;
  animation-delay: 1.9s;
}

.ripple.r3b {
  left: 76%;
  top: 72%;
  animation-delay: 3.0s;
}

.ripple.r4b {
  left: 36%;
  top: 24%;
  animation-delay: 4.1s;
}

.ripple.r5b {
  left: 48%;
  top: 50%;
  animation-delay: 2.5s;
}

.ripple.r6b {
  left: 80%;
  top: 20%;
  animation-delay: 3.6s;
}

/* 追加の大胆な発生ポイント */
.ripple.r7 {
  left: 14%;
  top: 32%;
  animation-delay: 0.9s;
}

.ripple.r8 {
  left: 64%;
  top: 86%;
  animation-delay: 2.8s;
}

.ripple.r7b {
  left: 14%;
  top: 32%;
  animation-delay: 2.1s;
}

.ripple.r8b {
  left: 64%;
  top: 86%;
  animation-delay: 3.9s;
}

/* 速度バリエーション */
.ripple.fast {
  animation-duration: 5.2s;
}

.ripple.slow {
  animation-duration: 7.6s;
}

@keyframes rippleExpand {
  0% {
    opacity: 0.0;
    transform: translate(-50%, -50%) scale(0.10);
  }

  12% {
    opacity: 0.7;
  }

  50% {
    opacity: 0.22;
  }

  100% {
    opacity: 0.0;
    transform: translate(-50%, -50%) scale(34);
  }
}

/* 睡蓮（ウォーターリリー） */
.lily {
  position: absolute;
  width: 90px;
  height: 90px;
  transform-origin: 50% 50%;
  animation: lilyFloat 5.6s ease-in-out infinite;
  filter: drop-shadow(0 8px 18px rgba(0, 0, 0, 0.12));
}

.lily svg {
  width: 100%;
  height: 100%;
  display: block;
}

.lily.l1 {
  left: 18%;
  top: 62%;
  animation-duration: 6.2s;
}

.lily.l2 {
  left: 72%;
  top: 28%;
  animation-duration: 5.6s;
}

.lily.l3 {
  left: 55%;
  top: 72%;
  animation-duration: 6.8s;
}

@keyframes lilyFloat {
  0% {
    transform: translateY(0) rotate(-0.6deg);
  }

  50% {
    transform: translateY(-6px) rotate(0.6deg);
  }

  100% {
    transform: translateY(0) rotate(-0.6deg);
  }
}

@media (prefers-reduced-motion: reduce) {
  .mandala {
    animation: none;
  }

  .halo {
    animation: none;
    opacity: 0.4;
  }

  .petal {
    animation: none;
    display: none;
  }

  .lily {
    animation: none;
  }
}

.intro-logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.intro-emblem {
  width: 56px;
  height: 56px;
  border-radius: 9999px;
  background: linear-gradient(135deg, var(--color-accent), var(--color-success));
  color: white;
  display: grid;
  place-items: center;
  font-weight: 700;
  letter-spacing: 0.08em;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
}

.intro-title {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.75rem;
  color: var(--color-text-primary);
}

.intro-card {
  margin-top: 1.25rem;
  background: white;
  border: 1px solid var(--color-border);
  border-radius: 1rem;
  padding: 1.25rem 1.5rem;
  box-shadow: 0 8px 24px var(--color-shadow);
}

.intro-pulse {
  display: inline-flex;
  gap: 6px;
}

.intro-dot {
  width: 8px;
  height: 8px;
  border-radius: 9999px;
  background: var(--color-accent);
  animation: introBounce 1s infinite ease-in-out;
}

.intro-dot:nth-child(2) {
  animation-delay: 0.12s;
  background: var(--color-success);
}

.intro-dot:nth-child(3) {
  animation-delay: 0.24s;
}

@keyframes introBounce {

  0%,
  80%,
  100% {
    transform: translateY(0);
    opacity: 1;
  }

  40% {
    transform: translateY(-6px);
    opacity: 0.85;
  }
}

@media (prefers-reduced-motion: reduce) {
  .intro-overlay {
    transition: opacity 10ms ease, visibility 10ms ease;
  }

  .intro-dot {
    animation: none;
  }
}

/* ---------------------------------------------
   リッチ本文表現（サイト全体の可読性向上用）
   --------------------------------------------- */
.content-rich {
  font-family: 'Noto Sans JP', sans-serif;
}

.content-rich h1,
.content-rich .heading-primary {
  margin-bottom: 1rem;
}

.content-rich h2,
.content-rich .heading-secondary,
.content-rich .heading-tertiary {
  margin-top: 2rem;
  margin-bottom: 0.75rem;
}

.content-rich p,
.content-rich .body-text {
  margin-bottom: 1rem;
}

.content-rich a:not(.btn-primary):not(.btn-secondary):not(.btn-secondary-soft) {
  color: var(--color-accent);
  text-decoration: underline;
  text-underline-offset: 3px;
}

.content-rich ul,
.content-rich ol {
  padding-left: 1.25rem;
  margin: 0.5rem 0 1rem;
}

.content-rich li {
  margin: 0.25rem 0;
}

.content-rich blockquote {
  margin: 1.25rem 0;
  padding: 0.75rem 1rem;
  border-left: 4px solid var(--color-accent);
  background: var(--color-sub-bg);
}

.content-rich hr {
  border: none;
  height: 1px;
  background: var(--color-border);
  margin: 2rem 0;
}

.content-rich img,
.content-rich video {
  border-radius: 0.5rem;
  box-shadow: 0 2px 12px var(--color-shadow);
}

.content-rich code {
  padding: 0.15rem 0.35rem;
  border-radius: 0.25rem;
  background: var(--color-sub-bg);
  border: 1px solid var(--color-border);
}

/* ボタンのリンクは本文用リンク装飾を適用しない */
.btn-primary,
.btn-secondary,
.btn-secondary-soft {
  text-decoration: none;
}

/* ---------------------------------------------
   カード内リンクの装飾制御（content-rich の上書き）
   --------------------------------------------- */
.card a,
.card .content-rich a {
  text-decoration: none !important;
  color: inherit;
  text-underline-offset: 0;
}

/* Tailwind の underline ユーティリティをカード内では無効化 */
.card .underline,
.card a.underline,
.card a:hover,
.card a:focus,
.card a:visited {
  text-decoration: none !important;
}

/* カードを a 要素がラップしている場合の下線無効化 */
.content-rich a:has(.card) {
  text-decoration: none !important;
  color: inherit;
  text-underline-offset: 0;
}